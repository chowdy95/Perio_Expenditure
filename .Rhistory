"Micronesia (Federated States of)",
Country),
iso3c = countrycode(Country, origin = "country.name", destination = "iso3c"))
# Prepare 2025 file, joining by iso3c
combined_country_input_2025 <-  joined_forecast %>%
filter(year_id ==2025) %>%
select(!(year_id)) %>%
right_join(existing_input_stripped) %>%
write_csv("data/combined_country_input_2025.csv")
# Regarding estimate for medical inflation, would refer to Dunn et al. (2016) (https://pmc.ncbi.nlm.nih.gov/articles/PMC5785315/)
# Based on CPI-U vs the Medical Care component of CPI, the medical care component has been broadly in line with real inflation
# In fact in 2021 and 2022 it was outstripped by overall CPI by 3-4%
# Therefore, no further adjustments were made for medical inflation
# Prepare 2030 file
combined_country_input_2030 <-  joined_forecast %>%
filter(year_id ==2030) %>%
select(!(year_id)) %>%
right_join(existing_input_stripped) %>%
write_csv("data/combined_country_input_2030.csv")
# Prepare 2035 file
combined_country_input_2035 <-  joined_forecast %>%
filter(year_id ==2035) %>%
select(!(year_id)) %>%
right_join(existing_input_stripped)  %>%
write_csv("data/combined_country_input_2035.csv")
# Prepare 2040 file
combined_country_input_2040 <-  joined_forecast %>%
filter(year_id ==2040) %>%
select(!(year_id)) %>%
right_join(existing_input_stripped) %>%
write_csv("data/combined_country_input_2040.csv")
# Prepare 2045 file
combined_country_input_2045 <-  joined_forecast %>%
filter(year_id ==2045) %>%
select(!(year_id)) %>%
right_join(existing_input_stripped) %>%
write_csv("data/combined_country_input_2045.csv")
# Prepare 2050 file
combined_country_input_2050 <-  joined_forecast %>%
filter(year_id ==2050) %>%
select(!(year_id)) %>%
right_join(existing_input_stripped) %>%
write_csv("data/combined_country_input_2050.csv")
final_df <- final_df %>%
mutate(across(all_of(procedures), ~ abs(.x))) %>%
mutate(across(all_of(procedures), ~ .x * 1.21))
base_df <- read_csv("./data/monte_carlo_input_from_rms.csv", col_types = cols())
base_df_dent_exp <- base_df %>%
select(iso3c, Dent_exp_usd)
overwrite_df <- read_csv("./data/country_input.csv", col_types = cols()) %>%
rename(iso3c = iso3, Dent_exppc_usd = "Dental Expenditure Per Capita") %>%
left_join(base_df_dent_exp)
known_country_list <- overwrite_df %>%
pull(iso3c)
final_df <- base_df %>%
filter(!iso3c %in% known_country_list) %>%
bind_rows(overwrite_df) %>%
select(-mu_log_prophy, -sigma_log_prophy, -log_GDP, -prophy_var, -Conversion)
# Procedure names of interest
procedures <- c(
"Prophy", "Consult_simple", "Consult_perio", "OPG", "PA", "RootDeb", "OHI",
"Extraction", "OFD", "GTR", "Single_implant", "Implant_surgery",
"Full_fixed", "Denture", "Denture_repair", "Maintenance_simp",
"Maintenance_perio"
final_df <- final_df %>%
# Procedure names of interest
procedures <- c(
"Prophy", "Consult_simple", "Consult_perio", "OPG", "PA", "RootDeb", "OHI",
"Extraction", "OFD", "GTR", "Single_implant", "Implant_surgery",
"Full_fixed", "Denture", "Denture_repair", "Maintenance_simp",
"Maintenance_perio"
)
final_df <- final_df %>%
mutate(across(all_of(procedures), ~ abs(.x))) %>%
mutate(across(all_of(procedures), ~ .x * 1.21))
procedures_sd <- paste0(procedures, "_sd")
base_df <- read_csv("./data/monte_carlo_input_from_rms.csv", col_types = cols())
base_df_dent_exp <- base_df %>%
select(iso3c, Dent_exp_usd)
overwrite_df <- read_csv("./data/country_input.csv", col_types = cols()) %>%
rename(iso3c = iso3, Dent_exppc_usd = "Dental Expenditure Per Capita") %>%
left_join(base_df_dent_exp)
known_country_list <- overwrite_df %>%
pull(iso3c)
final_df <- base_df %>%
filter(!iso3c %in% known_country_list) %>%
bind_rows(overwrite_df) %>%
select(-mu_log_prophy, -sigma_log_prophy, -log_GDP, -prophy_var, -Conversion)
# Procedure names of interest
procedures <- c(
"Prophy", "Consult_simple", "Consult_perio", "OPG", "PA", "RootDeb", "OHI",
"Extraction", "OFD", "GTR", "Single_implant", "Implant_surgery",
"Full_fixed", "Denture", "Denture_repair", "Maintenance_simp",
"Maintenance_perio"
)
procedures_sd <- paste0(procedures, "_sd")
final_df <- final_df %>%
mutate(across(all_of(procedures), ~ abs(.x))) %>%
mutate(across(all_of(procedures), ~ .x * 1.21)) %>%
mutate(across(all_of(procedures_sd), ~ .x * 1.21))
# Step 2: compute *_shape and *_rate columns explicitly
for (proc in procedures) {
mean_vec <- final_df[[proc]]
sd_vec   <- abs(final_df[[paste0(proc, "_sd")]])
var_vec  <- sd_vec^2
denom    <- ifelse(var_vec <= 0 | is.na(var_vec), NA_real_, var_vec)
final_df[[paste0(proc, "_shape")]] <- (mean_vec^2) / denom
final_df[[paste0(proc, "_rate")]]  <- mean_vec / denom
# safety for invalid values
final_df[[paste0(proc, "_shape")]][!is.finite(final_df[[paste0(proc, "_shape")]]) |
final_df[[paste0(proc, "_shape")]] <= 0] <- NA_real_
final_df[[paste0(proc, "_rate")]][!is.finite(final_df[[paste0(proc, "_rate")]]) |
final_df[[paste0(proc, "_rate")]] <= 0] <- NA_real_
}
write_csv(final_df, "./data/combined_country_input_for_analysis.csv") # for future data analysis
final_df_clean <- final_df %>%
dplyr::select(
-iso3c,
-Dent_exp_usd,
-Dent_exppc_usd,
-(GDP_per_capita_PPP_2021:gdp_ppp_lower),
-(Prophy:Maintenance_perio_sd)
)
# Save
write_csv(final_df_clean, "./data/combined_country_input.csv")
# ==============================================================================
# Extracting data from IHME population forecast, perio and edentulism prevalence data
# ==============================================================================
library(tidyverse)
library(countrycode)
population_forecast <- read_csv("data/IHME_population_forecast.csv") %>%     # Data taken from IHME (https://ghdx.healthdata.org/record/ihme-data/global-population-forecasts-2017-2100)
filter(scenario == 0, year_id %in% c(2025, 2030, 2035, 2040, 2045, 2050)) %>%
select(starts_with(c("location", "year", "measure", "val","upper","lower"))) %>%
mutate(iso3c = countrycode(location_name, origin = "country.name", destination = "iso3c")) %>%   #matching with ISO code for country names
filter(!is.na(iso3c)) %>% # drop all locations not corresponding to countries (largely regions and super regions)
rename(Pop = val) %>%
mutate(Pop_sd = (upper-Pop)/2) %>%
select(!(upper:lower)) %>%
select(!(measure_id:measure_name)) # Noted that this dataset is missing Nauru, Palau, Saint Kitts and Nevis, Tuvalu and San Marino, which had to be taken from another dataset
UN_population_forecast <- read_csv("data/UN_world_population_prospects.csv") %>%  # Data taken from UN World Population Prospects 2024 using the medium scenario (https://population.un.org/wpp/downloads?folder=Standard%20Projections&group=Most%20used)
filter(iso3c %in% c("NRU","TUV", "PLW", "KNA", "SMR", "MCO"))%>%
filter (Year %in% c(2025, 2030, 2035, 2040, 2045, 2050)) %>%
select(iso3c, Year, Pop) %>%
mutate (Pop = as.double(Pop)) %>%
mutate (Pop = Pop * 1000) %>%
rename(year_id = Year)
population_forecast <- bind_rows(population_forecast, UN_population_forecast) %>%
select(!(location_id:location_name))
perio_prevalence_forecast <- read_csv("data/GBD_prev_perio.csv") %>%     # Data taken from GBD forecasts
filter(year_id %in% c(2025, 2030, 2035, 2040, 2045, 2050)) %>%
filter(age_group_name == "All Ages", sex == "Both") %>%
mutate(iso3c = countrycode(location_name, origin = "country.name", destination = "iso3c")) %>%   #matching with ISO code for country names
filter(!is.na(iso3c)) %>%
rename(Perio_prev = mean) %>%
mutate(Perio_prev_sd = (upper-Perio_prev)/2) %>%
select(!(upper:lower)) %>%
select(!(sex:age_group_name)) %>%
select(!(location_id:location_name))
edent_prevalence_forecast <- read_csv("data/GBD_prev_edent.csv") %>%     # Data taken from GBD forecasts
filter(year_id %in% c(2025, 2030, 2035, 2040, 2045, 2050)) %>%
filter(age_group_name == "All Ages", sex == "Both") %>%
mutate(iso3c = countrycode(location_name, origin = "country.name", destination = "iso3c")) %>%   #matching with ISO code for country names
filter(!is.na(iso3c)) %>%
rename(Edent_prev = mean) %>%
mutate(Edent_prev_sd = (upper-Edent_prev)/2) %>%
select(!(upper:lower)) %>%
select(!(sex:age_group_name)) %>%
select(!(location_id:location_name))
joined_list <- list(perio_prevalence_forecast, edent_prevalence_forecast, population_forecast)
joined_forecast <- reduce(joined_list, left_join, by = c("year_id", "iso3c"))
# ==============================================================================
# Creating datasets for each year, joining by iso3c, and adjusting procedure costs for medical inflation
# ==============================================================================
existing_input <- read_csv("data/combined_country_input.csv")
existing_input_stripped <- existing_input %>%
select(!(Pop:Perio_prev_sd)) %>%
mutate(Country = ifelse(Country == "Micronesia",             # Micronesia is the only country that is not captured by the countrycodes package
"Micronesia (Federated States of)",
Country),
iso3c = countrycode(Country, origin = "country.name", destination = "iso3c"))
# Prepare 2025 file, joining by iso3c
combined_country_input_2025 <-  joined_forecast %>%
filter(year_id ==2025) %>%
select(!(year_id)) %>%
right_join(existing_input_stripped) %>%
write_csv("data/combined_country_input_2025.csv")
# Regarding estimate for medical inflation, would refer to Dunn et al. (2016) (https://pmc.ncbi.nlm.nih.gov/articles/PMC5785315/)
# Based on CPI-U vs the Medical Care component of CPI, the medical care component has been broadly in line with real inflation
# In fact in 2021 and 2022 it was outstripped by overall CPI by 3-4%
# Therefore, no further adjustments were made for medical inflation
# Prepare 2030 file
combined_country_input_2030 <-  joined_forecast %>%
filter(year_id ==2030) %>%
select(!(year_id)) %>%
right_join(existing_input_stripped) %>%
write_csv("data/combined_country_input_2030.csv")
# Prepare 2035 file
combined_country_input_2035 <-  joined_forecast %>%
filter(year_id ==2035) %>%
select(!(year_id)) %>%
right_join(existing_input_stripped)  %>%
write_csv("data/combined_country_input_2035.csv")
# Prepare 2040 file
combined_country_input_2040 <-  joined_forecast %>%
filter(year_id ==2040) %>%
select(!(year_id)) %>%
right_join(existing_input_stripped) %>%
write_csv("data/combined_country_input_2040.csv")
# Prepare 2045 file
combined_country_input_2045 <-  joined_forecast %>%
filter(year_id ==2045) %>%
select(!(year_id)) %>%
right_join(existing_input_stripped) %>%
write_csv("data/combined_country_input_2045.csv")
# Prepare 2050 file
combined_country_input_2050 <-  joined_forecast %>%
filter(year_id ==2050) %>%
select(!(year_id)) %>%
right_join(existing_input_stripped) %>%
write_csv("data/combined_country_input_2050.csv")
# ==============================================================================
# Cost Model Function — Optimised Version with Cleanup
# ==============================================================================
source("./99_functions.R")
# ============================================================================
# Load packages
# ============================================================================
library(MCMCpack)
library(tidyverse)
library(data.table)
# ==============================================================================
# Calling the function for 2025
# ==============================================================================
# Example file paths (adjust if needed)
countries_path <- "./data/combined_country_input_2025.csv"
procedure_lookup_high_path <- "./data/procedure_lookup.csv"
procedure_lookup_mid_path <- "./data/procedure_lookup.csv"
#  procedure_lookup_high_path <- "./data/procedure_lookup_increased_maintenance.csv"   #for various scenarios
#  procedure_lookup_mid_path  <- "./data/procedure_lookup_increased_maintenance.csv"
procedure_lookup_low_path <- "./data/procedure_lookup_low_scenario.csv"
procedure_lookup_WHO_target_path <- "./data/procedure_lookup.csv"
#  procedure_lookup_low_path  <- "./data/procedure_lookup_low_scenario_increased_maintenance.csv"
tx_split_high_path <- "./data/tx_split.csv"
tx_split_mid_path <- "./data/tx_split_mid_scenario.csv"
tx_split_low_path <- "./data/tx_split_low_scenario.csv"
tx_split_WHO_target_path <- "./data/tx_split_WHO_target_scenario.csv"
severity_split_path <- "./data/severity_split.csv"
# Where to write outputs
output_dir <- "outputs_2025"
n_sims = 10000
# Call the new scenario runner
run_cost_model_scenarios(
countries_path = countries_path,
procedure_lookup_high_path = procedure_lookup_high_path,
procedure_lookup_mid_path = procedure_lookup_mid_path,
procedure_lookup_low_path = procedure_lookup_low_path,
tx_split_high_path = tx_split_high_path,
tx_split_mid_path = tx_split_mid_path,
tx_split_low_path = tx_split_low_path,
severity_split_path = severity_split_path,
n_sims = n_sims,
output_dir = output_dir,
scenarios = c("low", "mid", "high", "WHO_target"),
# scenarios = c("low", "mid", "high"),
slice_size = 999
)
library(MCMCpack)
library(tidyverse)
library(data.table)
# ==============================================================================
# Calling the function for 2025
# ==============================================================================
# Example file paths (adjust if needed)
countries_path <- "./data/combined_country_input_2025.csv"
procedure_lookup_high_path <- "./data/procedure_lookup.csv"
procedure_lookup_mid_path <- "./data/procedure_lookup.csv"
#  procedure_lookup_high_path <- "./data/procedure_lookup_increased_maintenance.csv"   #for various scenarios
#  procedure_lookup_mid_path  <- "./data/procedure_lookup_increased_maintenance.csv"
procedure_lookup_low_path <- "./data/procedure_lookup_low_scenario.csv"
procedure_lookup_WHO_target_path <- "./data/procedure_lookup.csv"
#  procedure_lookup_low_path  <- "./data/procedure_lookup_low_scenario_increased_maintenance.csv"
tx_split_high_path <- "./data/tx_split.csv"
tx_split_mid_path <- "./data/tx_split_mid_scenario.csv"
tx_split_low_path <- "./data/tx_split_low_scenario.csv"
tx_split_WHO_target_path <- "./data/tx_split_WHO_target_scenario.csv"
severity_split_path <- "./data/severity_split.csv"
# Where to write outputs
output_dir <- "outputs_2025"
n_sims = 10000
scenario = "WHO_target"
n_sims = 1000
# ============================================================================
# Load inputs with explicit col_types for speed
# ============================================================================
message("Loading input files ...")
countries <- read_csv(countries_path, col_types = cols())
severity_split <- read_csv(severity_split_path, col_types = cols())
procedure_lookup <- case_when(
scenario == "high" ~ read_csv(procedure_lookup_high_path, col_types = cols()),
scenario == "mid" ~ read_csv(procedure_lookup_mid_path, col_types = cols()),
scenario == "low" ~ read_csv(procedure_lookup_low_path, col_types = cols()),
scenario == "WHO_target" ~ read_csv(procedure_lookup_WHO_target_path, col_types = cols())
)
tx_split <- case_when(
scenario == "high" ~ read_csv(tx_split_high_path, col_types = cols()),
scenario == "mid" ~ read_csv(tx_split_mid_path, col_types = cols()),
scenario == "low" ~ read_csv(tx_split_low_path, col_types = cols()),
scenario == "WHO_target" ~ read_csv(tx_split_WHO_target_path, col_types = cols())
)
# ============================================================================
# Reshape country costs to long format
# ============================================================================
message("Reshaping country cost data ...")
procedures <- c(
"Consult_simple", "Consult_perio", "OPG", "PA", "Prophy", "RootDeb", "OHI",
"Extraction", "OFD", "GTR", "Single_implant", "Implant_surgery",
"Full_fixed", "Denture", "Denture_repair", "Maintenance_simp",
"Maintenance_perio"
)
pattern <- paste0(procedures, collapse = "|")
countries_long <- countries %>%
pivot_longer(
cols = matches(paste0(pattern, "_shape|", pattern, "_rate")),
names_to = "Var",
values_to = "Value"
) %>%
mutate(
Metric    = if_else(str_ends(Var, "_shape"), "Shape", "Rate"),
Procedure = str_remove(Var, "_shape$|_rate$")
) %>%
select(Country, Procedure, Metric, Value) %>%
pivot_wider(names_from = Metric, values_from = Value)
View(countries)
# Call the new scenario runner
run_cost_model_scenarios(
countries_path = countries_path,
procedure_lookup_high_path = procedure_lookup_high_path,
procedure_lookup_mid_path = procedure_lookup_mid_path,
procedure_lookup_low_path = procedure_lookup_low_path,
tx_split_high_path = tx_split_high_path,
tx_split_mid_path = tx_split_mid_path,
tx_split_low_path = tx_split_low_path,
severity_split_path = severity_split_path,
n_sims = n_sims,
output_dir = output_dir,
scenarios = c("WHO_target"),
# scenarios = c("low", "mid", "high", "WHO_target"),
# scenarios = c("low", "mid", "high"),
slice_size = 999
)
source("./99_functions.R")
library(MCMCpack)
library(tidyverse)
library(data.table)
# Example file paths (adjust if needed)
countries_path <- "./data/combined_country_input_2025.csv"
procedure_lookup_high_path <- "./data/procedure_lookup.csv"
procedure_lookup_mid_path <- "./data/procedure_lookup.csv"
#  procedure_lookup_high_path <- "./data/procedure_lookup_increased_maintenance.csv"   #for various scenarios
#  procedure_lookup_mid_path  <- "./data/procedure_lookup_increased_maintenance.csv"
procedure_lookup_low_path <- "./data/procedure_lookup_low_scenario.csv"
procedure_lookup_WHO_target_path <- "./data/procedure_lookup.csv"
#  procedure_lookup_low_path  <- "./data/procedure_lookup_low_scenario_increased_maintenance.csv"
tx_split_high_path <- "./data/tx_split.csv"
tx_split_mid_path <- "./data/tx_split_mid_scenario.csv"
tx_split_low_path <- "./data/tx_split_low_scenario.csv"
tx_split_WHO_target_path <- "./data/tx_split_WHO_target_scenario.csv"
severity_split_path <- "./data/severity_split.csv"
# Where to write outputs
output_dir <- "outputs_2025"
n_sims = 10000
# Call the new scenario runner
run_cost_model_scenarios(
countries_path = countries_path,
procedure_lookup_high_path = procedure_lookup_high_path,
procedure_lookup_mid_path = procedure_lookup_mid_path,
procedure_lookup_low_path = procedure_lookup_low_path,
tx_split_high_path = tx_split_high_path,
tx_split_mid_path = tx_split_mid_path,
tx_split_low_path = tx_split_low_path,
severity_split_path = severity_split_path,
n_sims = n_sims,
output_dir = output_dir,
scenarios = c("WHO_target"),
# scenarios = c("low", "mid", "high", "WHO_target"),
# scenarios = c("low", "mid", "high"),
slice_size = 999
)
# ==============================================================================
# Cost Model Function — Optimised Version with Cleanup
# ==============================================================================
source("./99_functions.R")
# ============================================================================
# Load packages
# ============================================================================
library(MCMCpack)
library(tidyverse)
library(data.table)
# ==============================================================================
# Calling the function for 2025
# ==============================================================================
# Example file paths (adjust if needed)
countries_path <- "./data/combined_country_input_2025.csv"
procedure_lookup_high_path <- "./data/procedure_lookup.csv"
procedure_lookup_mid_path <- "./data/procedure_lookup.csv"
#  procedure_lookup_high_path <- "./data/procedure_lookup_increased_maintenance.csv"   #for various scenarios
#  procedure_lookup_mid_path  <- "./data/procedure_lookup_increased_maintenance.csv"
procedure_lookup_low_path <- "./data/procedure_lookup_low_scenario.csv"
procedure_lookup_WHO_target_path <- "./data/procedure_lookup.csv"
#  procedure_lookup_low_path  <- "./data/procedure_lookup_low_scenario_increased_maintenance.csv"
tx_split_high_path <- "./data/tx_split.csv"
tx_split_mid_path <- "./data/tx_split_mid_scenario.csv"
tx_split_low_path <- "./data/tx_split_low_scenario.csv"
tx_split_WHO_target_path <- "./data/tx_split_WHO_target_scenario.csv"
severity_split_path <- "./data/severity_split.csv"
# Where to write outputs
output_dir <- "outputs_2025"
n_sims = 12000
# ==============================================================================
# Cost Model Function — Optimised Version with Cleanup
# ==============================================================================
source("./99_functions.R")
# ============================================================================
# Load packages
# ============================================================================
library(MCMCpack)
library(tidyverse)
library(data.table)
# ==============================================================================
# Calling the function for 2025
# ==============================================================================
# Example file paths (adjust if needed)
countries_path <- "./data/combined_country_input_2025.csv"
procedure_lookup_high_path <- "./data/procedure_lookup.csv"
procedure_lookup_mid_path <- "./data/procedure_lookup.csv"
#  procedure_lookup_high_path <- "./data/procedure_lookup_increased_maintenance.csv"   #for various scenarios
#  procedure_lookup_mid_path  <- "./data/procedure_lookup_increased_maintenance.csv"
procedure_lookup_low_path <- "./data/procedure_lookup_low_scenario.csv"
procedure_lookup_WHO_target_path <- "./data/procedure_lookup.csv"
#  procedure_lookup_low_path  <- "./data/procedure_lookup_low_scenario_increased_maintenance.csv"
tx_split_high_path <- "./data/tx_split.csv"
tx_split_mid_path <- "./data/tx_split_mid_scenario.csv"
tx_split_low_path <- "./data/tx_split_low_scenario.csv"
tx_split_WHO_target_path <- "./data/tx_split_WHO_target_scenario.csv"
severity_split_path <- "./data/severity_split.csv"
# Where to write outputs
output_dir <- "outputs_2025"
n_sims = 12000
# ==============================================================================
# Calling the function for 2040
# ==============================================================================
# Example file paths (adjust if needed)
countries_path <- "./data/combined_country_input_2040.csv"
# Where to write outputs
output_dir <- "outputs_2040"
# Call the new scenario runner
run_cost_model_scenarios(
countries_path = countries_path,
procedure_lookup_high_path = procedure_lookup_high_path,
procedure_lookup_mid_path = procedure_lookup_mid_path,
procedure_lookup_low_path = procedure_lookup_low_path,
tx_split_high_path = tx_split_high_path,
tx_split_mid_path = tx_split_mid_path,
tx_split_low_path = tx_split_low_path,
severity_split_path = severity_split_path,
n_sims = n_sims,
output_dir = output_dir,
scenarios = c("WHO_target"),
# scenarios = c("low", "mid", "high", "WHO_target"),
# scenarios = c("low", "mid", "high"),
slice_size = 999
)
# Example file paths (adjust if needed)
countries_path <- "./data/combined_country_input_2045.csv"
# Where to write outputs
output_dir <- "outputs_2045"
# Call the new scenario runner
run_cost_model_scenarios(
countries_path = countries_path,
procedure_lookup_high_path = procedure_lookup_high_path,
procedure_lookup_mid_path = procedure_lookup_mid_path,
procedure_lookup_low_path = procedure_lookup_low_path,
tx_split_high_path = tx_split_high_path,
tx_split_mid_path = tx_split_mid_path,
tx_split_low_path = tx_split_low_path,
severity_split_path = severity_split_path,
n_sims = n_sims,
output_dir = output_dir,
scenarios = c("low", "mid", "high", "WHO_target"),
# scenarios = c("low", "mid", "high"),
slice_size = 999
)
# Example file paths (adjust if needed)
countries_path <- "./data/combined_country_input_2050.csv"
# Where to write outputs
output_dir <- "outputs_2050"
# Call the new scenario runner
run_cost_model_scenarios(
countries_path = countries_path,
procedure_lookup_high_path = procedure_lookup_high_path,
procedure_lookup_mid_path = procedure_lookup_mid_path,
procedure_lookup_low_path = procedure_lookup_low_path,
tx_split_high_path = tx_split_high_path,
tx_split_mid_path = tx_split_mid_path,
tx_split_low_path = tx_split_low_path,
severity_split_path = severity_split_path,
n_sims = n_sims,
output_dir = output_dir,
scenarios = c("low", "mid", "high", "WHO_target"),
# scenarios = c("low", "mid", "high"),
slice_size = 999
)
